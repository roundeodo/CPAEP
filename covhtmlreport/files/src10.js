var g_data = {"name":"rtl/gemm/general_mac_pe.sv","src":"//-----------------------\n// Simple MAC processing element\n// \n// Description:\n// This module implements a simple Multiply-Accumulate (MAC) processing element (PE)\n// that can handle multiple input pairs simultaneously. It takes in multiple pairs of\n// input operands, performs multiplication on each pair, and accumulates the results.\n// The PE supports initialization and accumulation control signals.\n// This has an output stationary structure.\n//\n// Parameters:\n// - InDataWidth  : Width of the input data (default: 8 bits)\n// - NumInputs    : Number of input pairs to process simultaneously (default: 1)\n// - OutDataWidth : Width of the output data (default: 32 bits)\n//\n// Ports:\n// - clk_i        : Clock input\n// - rst_ni       : Active-low reset input\n// - a_i         : Input operand A (array of NumInputs elements)\n// - b_i         : Input operand B (array of NumInputs elements)\n// - a_valid_i    : Valid signal for input A\n// - b_valid_i    : Valid signal for input B\n// - init_save_i  : Initialization signal for saving the first multiplication result\n// - acc_clr_i    : Clear signal for the accumulator\n// - c_o          : Output accumulated result\n//-----------------------\n\nmodule general_mac_pe #(\n  parameter int unsigned InDataWidth  = 8,\n  parameter int unsigned NumInputs    = 1,\n  parameter int unsigned OutDataWidth = 32\n)(\n  // Clock and reset\n  input  logic clk_i,\n  input  logic rst_ni,\n  // Input operands\n  input  logic signed [NumInputs-1:0][InDataWidth-1:0] a_i,\n  input  logic signed [NumInputs-1:0][InDataWidth-1:0] b_i,\n  // Valid signals for inputs\n  input  logic a_valid_i,\n  input  logic b_valid_i,\n  input  logic init_save_i,\n  // Clear signal for output\n  input  logic acc_clr_i,\n  // Output accumulation\n  output logic signed [OutDataWidth-1:0] c_o\n);\n\n  // Wires and logic\n  logic acc_valid;\n  logic signed [OutDataWidth-1:0] mult_result;\n\n  assign acc_valid = a_valid_i && b_valid_i;\n\n  // Combined multiplication\n  always_comb begin\n    mult_result = '0;\n    for (int i = 0; i < NumInputs; i++) begin\n      mult_result += $signed(a_i[i]) * $signed(b_i[i]);\n    end\n  end\n\n  // Accumulation unit\n  always_ff @(posedge clk_i or negedge rst_ni) begin\n    if (!rst_ni) begin\n      c_o <= '0;\n    end \n    else if (init_save_i) begin  // means initialzation  the old result will be covered directly\n      c_o <= mult_result;\n    end \n    else if (acc_valid) begin\n      c_o <= c_o + mult_result;\n    end \n    else if (acc_clr_i) begin\n      c_o <= '0;\n    end \n    else begin\n      c_o <= c_o;\n    end\n  end\n\nendmodule\n","lang":"verilog"};
processSrcData(g_data);